<footer class="site-footer">
    <div class="footer-container">
        <!-- Editorial Note -->
        <div class="editorial-note">
            <p><strong>Editorial Note:</strong> We independently review all products. If you make a purchase through our links, we may receive a commission.</p>
        </div>
        
        <!-- Opt-in Disclaimer -->
        <div class="opt-in-disclaimer">
            <p>By continuing to use this site, you consent to our use of cookies and sharing of technical data with partners for analytics and service improvements.</p>
        </div>
        
        <div class="footer-simple">
            <a href="https://{{DOMAIN}}/assets/privacy-policy.html">Privacy Policy</a>
            <a href="https://{{DOMAIN}}/assets/terms-of-service.html">Terms & Conditions</a>
            <a href="https://{{DOMAIN}}/assets/do-not-sell.html" class="ccpa-important">üîí Do Not Sell My Personal Information</a>
            <a href="https://{{DOMAIN}}/assets/ccpa-privacy-rights.html">CCPA Notice</a>
        </div>
        
        <!-- Copyright -->
        <div class="footer-copyright">
            <p>{{BRAND_NAME}}.com ¬© 2025 All Rights Reserved</p>
        </div>
    </div>
</footer>

<!-- Cookie Consent Banner - Glass View Design -->
<div id="cookie-banner" class="cookie-banner" style="display: none; position: fixed; bottom: 0; left: 0; right: 0; z-index: 999999;">
    <div class="cookie-banner-content">
        <div class="cookie-info">
            <p>
                We use cookies to enhance your experience. 
                <a href="https://{{DOMAIN}}/assets/ccpa-privacy-rights.html" class="privacy-link">Learn more</a>
            </p>
        </div>
        <div class="cookie-actions">
            <button type="button" onclick="rejectCookies(event)" class="btn-reject">Reject</button>
            <button type="button" onclick="acceptCookies(event)" class="btn-accept">ACCEPT</button>
        </div>
    </div>
</div>


<script>
console.log('üç™üç™üç™ FOOTER SCRIPT LOADED - Cookie consent initialization starting...');

// Cookie Consent Logic with Glass View Design
let cookiePreferences = {
    necessary: true,
    analytics: false,
    marketing: false,
    personalization: false
};

console.log('üç™ Cookie preferences initialized:', cookiePreferences);

function showCookieBanner() {
    console.log('üç™ showCookieBanner called');
    const consent = localStorage.getItem('cookie-consent');
    console.log('üç™ Existing consent:', consent);
    
    if (!consent) {
        const banner = document.getElementById('cookie-banner');
        console.log('üç™ Banner element found for showing:', !!banner);
        
        if (banner) {
            // Get computed styles to debug
            const computedStyle = window.getComputedStyle(banner);
            console.log('üç™ BEFORE - Banner computed styles:', {
                display: computedStyle.display,
                visibility: computedStyle.visibility,
                opacity: computedStyle.opacity,
                zIndex: computedStyle.zIndex,
                position: computedStyle.position,
                bottom: computedStyle.bottom,
                left: computedStyle.left,
                right: computedStyle.right
            });
            
            // Force show with maximum priority
            banner.style.display = 'block';
            banner.style.visibility = 'visible';
            banner.style.opacity = '1';
            banner.style.zIndex = '999999';
            banner.style.position = 'fixed';
            banner.style.bottom = '0';
            banner.style.left = '0';
            banner.style.right = '0';
            banner.removeAttribute('hidden');
            
            // Check again after setting
            const computedStyleAfter = window.getComputedStyle(banner);
            console.log('üç™ AFTER - Banner computed styles:', {
                display: computedStyleAfter.display,
                visibility: computedStyleAfter.visibility,
                opacity: computedStyleAfter.opacity,
                zIndex: computedStyleAfter.zIndex,
                position: computedStyleAfter.position
            });
            
            // Check if banner is in viewport
            const rect = banner.getBoundingClientRect();
            console.log('üç™ Banner position in viewport:', {
                top: rect.top,
                bottom: rect.bottom,
                left: rect.left,
                right: rect.right,
                width: rect.width,
                height: rect.height,
                isInViewport: rect.bottom > 0 && rect.top < window.innerHeight
            });
            
            console.log('üç™ Banner shown with forced styles');
        } else {
            console.error('üç™ Banner element not found for showing!');
            console.log('üç™ All elements with "cookie" in id or class:', 
                Array.from(document.querySelectorAll('[id*="cookie"], [class*="cookie"]'))
                    .map(el => ({ tag: el.tagName, id: el.id, class: el.className }))
            );
        }
    } else {
        console.log('üç™ Consent already exists, not showing banner');
        // Load existing preferences
        try {
            cookiePreferences = JSON.parse(consent);
            console.log('üç™ Loaded preferences:', cookiePreferences);
        } catch (e) {
            console.error('üç™ Error parsing cookie preferences:', e);
        }
    }
}

function acceptCookies(e) {
    console.log('üç™ acceptCookies function called');
    if (e) {
        e.preventDefault();
        e.stopPropagation();
        console.log('üç™ Event prevented and stopped');
    }
    
    const allAccepted = {
        necessary: true,
        analytics: true,
        marketing: true,
        personalization: true
    };
    
    try {
        localStorage.setItem('cookie-consent', JSON.stringify(allAccepted));
        localStorage.setItem('cookie-consent-date', new Date().toISOString());
        console.log('üç™ Consent saved to localStorage');
    } catch (error) {
        console.error('üç™ Error saving to localStorage:', error);
    }
    
    // Hide the banner immediately with multiple attempts
    const banner = document.getElementById('cookie-banner');
    console.log('üç™ Banner element found:', !!banner);
    
    if (banner) {
        banner.style.display = 'none';
        banner.style.visibility = 'hidden';
        banner.style.opacity = '0';
        banner.setAttribute('hidden', 'true');
        console.log('üç™ Banner hidden with multiple methods');
    } else {
        console.error('üç™ Banner element not found!');
    }
    
    // Also try to hide any other cookie banners
    const allBanners = document.querySelectorAll('.cookie-banner, #cookie-banner, [class*="cookie"]');
    allBanners.forEach((el, index) => {
        if (el.style) {
            el.style.display = 'none';
            console.log(`üç™ Hidden additional banner ${index}`);
        }
    });
    
    // Initialize tracking scripts here if needed
    if (typeof initializeTracking === 'function') {
        initializeTracking();
    }
    
    console.log('‚úÖ Cookies accepted - banner should be hidden');
    return false;
}

function rejectCookies(e) {
    console.log('üç™ rejectCookies function called');
    if (e) {
        e.preventDefault();
        e.stopPropagation();
        console.log('üç™ Event prevented and stopped');
    }
    
    const onlyNecessary = {
        necessary: true,
        analytics: false,
        marketing: false,
        personalization: false
    };
    
    try {
        localStorage.setItem('cookie-consent', JSON.stringify(onlyNecessary));
        localStorage.setItem('cookie-consent-date', new Date().toISOString());
        console.log('üç™ Rejection saved to localStorage');
    } catch (error) {
        console.error('üç™ Error saving to localStorage:', error);
    }
    
    // Hide the banner immediately with multiple attempts
    const banner = document.getElementById('cookie-banner');
    console.log('üç™ Banner element found:', !!banner);
    
    if (banner) {
        banner.style.display = 'none';
        banner.style.visibility = 'hidden';
        banner.style.opacity = '0';
        banner.setAttribute('hidden', 'true');
        console.log('üç™ Banner hidden with multiple methods');
    } else {
        console.error('üç™ Banner element not found!');
    }
    
    // Also try to hide any other cookie banners
    const allBanners = document.querySelectorAll('.cookie-banner, #cookie-banner, [class*="cookie"]');
    allBanners.forEach((el, index) => {
        if (el.style) {
            el.style.display = 'none';
            console.log(`üç™ Hidden additional banner ${index}`);
        }
    });
    
    console.log('‚úÖ Cookies rejected - banner should be hidden');
    return false;
}


// Debug function to check cookie banner state
function debugCookieBanner() {
    console.log('üîç Cookie Banner Debug Info:');
    const banner = document.getElementById('cookie-banner');
    console.log('Banner element:', banner);
    if (banner) {
        console.log('Display:', banner.style.display);
        console.log('Visibility:', banner.style.visibility);
        console.log('Opacity:', banner.style.opacity);
        console.log('Hidden attribute:', banner.hasAttribute('hidden'));
        console.log('Computed style display:', window.getComputedStyle(banner).display);
    }
    console.log('LocalStorage consent:', localStorage.getItem('cookie-consent'));
    console.log('All cookie-related elements:', document.querySelectorAll('[class*="cookie"], [id*="cookie"]'));
}

// Make debug function globally available
window.debugCookieBanner = debugCookieBanner;

// Make showCookieBanner globally available for manual triggering
window.showCookieBanner = showCookieBanner;

// Make accept/reject functions globally available
window.acceptCookies = acceptCookies;
window.rejectCookies = rejectCookies;

// Show banner on page load - handle both cases (before and after DOMContentLoaded)
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üç™ DOM loaded, initializing cookie banner');
        showCookieBanner();
    });
} else {
    // DOM already loaded, run immediately
    console.log('üç™ DOM already loaded, initializing cookie banner immediately');
    showCookieBanner();
}

// Also try showing after a small delay to ensure footer is fully injected
setTimeout(function() {
    console.log('üç™ Delayed check for cookie banner');
    showCookieBanner();
}, 500);

// Additional aggressive check after 1 second
setTimeout(function() {
    console.log('üç™ Final aggressive check for cookie banner');
    const consent = localStorage.getItem('cookie-consent');
    if (!consent) {
        const banner = document.getElementById('cookie-banner');
        if (banner) {
            // Force show with maximum priority and all positioning
            banner.style.display = 'block';
            banner.style.visibility = 'visible';
            banner.style.opacity = '1';
            banner.style.zIndex = '999999';
            banner.style.position = 'fixed';
            banner.style.bottom = '0';
            banner.style.left = '0';
            banner.style.right = '0';
            banner.style.width = '100%';
            banner.removeAttribute('hidden');
            
            console.log('üç™ FORCED banner to show after 1 second with max z-index');
            console.log('üç™ Banner final styles:', {
                display: banner.style.display,
                visibility: banner.style.visibility,
                opacity: banner.style.opacity,
                zIndex: banner.style.zIndex,
                position: banner.style.position
            });
        } else {
            console.error('üç™ Banner element STILL not found after 1 second!');
        }
    }
}, 1000);
</script>

<style>
/* Cookie Banner - Maximum Priority Positioning */
#cookie-banner.cookie-banner {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 999999 !important;
    width: 100% !important;
}

/* Black and White Cookie Button Styling - Override any existing styles */
.btn-reject {
    background: #ffffff !important;
    border: 2px solid #000000 !important;
    color: #000000 !important;
    font-size: 15px !important;
    font-weight: 600 !important;
    cursor: pointer !important;
    padding: 12px 28px !important;
    border-radius: 8px !important;
    transition: all 0.3s ease !important;
    min-width: 120px !important;
}

.btn-reject:hover {
    background: #000000 !important;
    color: #ffffff !important;
    transform: translateY(-2px) !important;
}

.btn-accept {
    background: #000000 !important;
    border: 2px solid #000000 !important;
    color: #ffffff !important;
    font-size: 15px !important;
    font-weight: 700 !important;
    cursor: pointer !important;
    padding: 12px 32px !important;
    border-radius: 8px !important;
    transition: all 0.3s ease !important;
    text-transform: uppercase !important;
    letter-spacing: 0.8px !important;
    min-width: 140px !important;
}

.btn-accept:hover {
    background: #333333 !important;
    border-color: #333333 !important;
    transform: translateY(-2px) !important;
}
</style>
